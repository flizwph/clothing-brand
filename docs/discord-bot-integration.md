# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Discord –±–æ—Ç–æ–º

## –û–±–∑–æ—Ä

–î–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Discord –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π Discord-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –æ—Å–Ω–æ–≤–Ω—ã–º API —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å —Å–≤–æ–∏ Discord-–∞–∫–∫–∞—É–Ω—Ç—ã –∫ –ø—Ä–æ—Ñ–∏–ª—è–º –Ω–∞ —Å–∞–π—Ç–µ –Ω–∞—à–µ–≥–æ –±—Ä–µ–Ω–¥–∞.

## –ü—Ä–æ—Ü–µ—Å—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
   - –ß–µ—Ä–µ–∑ —Å–∞–π—Ç: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Ñ–∏–ª—è
   - –ß–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `/linkDiscord`

2. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `!link –ö–û–î` –±–æ—Ç—É –≤ Discord (–Ω–∞–ø—Ä–∏–º–µ—Ä: `!link a1b2c3d4`)
   - –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `!link`, –∞ –∑–∞—Ç–µ–º –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
   - –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ —á–µ—Ä–µ–∑ API
   - –ë–æ—Ç —Å–æ–æ–±—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

3. –ö–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:
   - –ò–º–µ—é—Ç —Ñ–æ—Ä–º–∞—Ç 8 —Å–∏–º–≤–æ–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `a1b2c3d4`)
   - –ú–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å API –±–æ—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π API-–∫–ª—é—á:

```env
API_BASE_URL=https://your-backend-url.com
API_KEY=your-default-secret-key
```

### –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞ (JDA)

```java
package com.brand.discordbot;

import net.dv8tion.jda.api.JDA;
import net.dv8tion.jda.api.JDABuilder;
import net.dv8tion.jda.api.events.message.MessageReceivedEvent;
import net.dv8tion.jda.api.hooks.ListenerAdapter;
import org.json.JSONObject;

import javax.security.auth.login.LoginException;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.charset.StandardCharsets;
import java.util.HashMap;
import java.util.Map;

public class Bot extends ListenerAdapter {
    private final String API_BASE_URL = System.getenv("API_BASE_URL");
    private final String API_KEY = System.getenv("API_KEY");
    private final Map<String, String> userStates = new HashMap<>();

    public static void main(String[] args) throws LoginException {
        JDA jda = JDABuilder.createDefault(System.getenv("DISCORD_TOKEN"))
                .addEventListeners(new Bot())
                .build();
    }

    @Override
    public void onMessageReceived(MessageReceivedEvent event) {
        if (event.getAuthor().isBot()) return;

        String content = event.getMessage().getContentRaw();
        String userId = event.getAuthor().getId();

        if (content.equals("!verif")) {
            userStates.put(userId, "AWAITING_CODE");
            event.getChannel().sendMessage("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –Ω–∞ —Å–∞–π—Ç–µ").queue();
            return;
        }

        if (userStates.getOrDefault(userId, "").equals("AWAITING_CODE")) {
            String code = content.trim();
            verifyCode(event, code);
            userStates.remove(userId);
        }
    }

    private void verifyCode(MessageReceivedEvent event, String code) {
        try {
            URL url = new URL(API_BASE_URL + "/api/discord/verify");
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Content-Type", "application/json");
            conn.setRequestProperty("X-API-KEY", API_KEY);
            conn.setDoOutput(true);

            // –°–æ–∑–¥–∞–µ–º JSON –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
            JSONObject requestBody = new JSONObject();
            requestBody.put("code", code);
            requestBody.put("discordId", event.getAuthor().getId());
            requestBody.put("discordUsername", event.getAuthor().getName());

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
            try (OutputStream os = conn.getOutputStream()) {
                byte[] input = requestBody.toString().getBytes(StandardCharsets.UTF_8);
                os.write(input, 0, input.length);
            }

            // –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç
            StringBuilder response = new StringBuilder();
            try (BufferedReader br = new BufferedReader(new InputStreamReader(
                    conn.getResponseCode() == 200 ? conn.getInputStream() : conn.getErrorStream()))) {
                String line;
                while ((line = br.readLine()) != null) {
                    response.append(line);
                }
            }

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç
            if (conn.getResponseCode() == 200) {
                JSONObject jsonResponse = new JSONObject(response.toString());
                boolean success = jsonResponse.getBoolean("success");
                String message = jsonResponse.getString("message");

                if (success) {
                    event.getChannel().sendMessage("üéâ " + message).queue();
                } else {
                    event.getChannel().sendMessage("‚ùå " + message).queue();
                }
            } else {
                event.getChannel().sendMessage("‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: " + conn.getResponseCode()).queue();
            }
        } catch (Exception e) {
            event.getChannel().sendMessage("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞: " + e.getMessage()).queue();
        }
    }
}
```

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã API

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
```
POST /api/discord/verify
```

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/json
X-API-KEY: {discord_api_secret_key}
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "code": "a1b2c3d4",
  "discordId": "123456789",
  "discordUsername": "discord_user"
}
```

**–û—Ç–≤–µ—Ç (—É—Å–ø–µ—à–Ω—ã–π):**
```json
{
  "success": true,
  "message": "Discord –∞–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω"
}
```

**–û—Ç–≤–µ—Ç (–æ—à–∏–±–∫–∞):**
```json
{
  "success": false,
  "message": "–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏"
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
```
POST /api/discord/check-status
```

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Content-Type: application/json
X-API-KEY: {discord_api_secret_key}
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "discordId": "123456789",
  "discordUsername": "discord_user"
}
```

**–û—Ç–≤–µ—Ç (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω):**
```json
{
  "success": true,
  "message": "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å–∞–π—Ç—É! –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: username",
  "username": "username",
  "telegramHandle": "@telegram_user"
}
```

**–û—Ç–≤–µ—Ç (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω):**
```json
{
  "success": false,
  "message": "–ê–∫–∫–∞—É–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≤–µ—Ä—à–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–∞ —Å–∞–π—Ç–µ."
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
2. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ API_KEY –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ
3. –•—Ä–∞–Ω–∏—Ç–µ API_KEY –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞—Å—Ç–æ—è—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º Discord
5. –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –¥–æ–ª–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –∫–æ–¥–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å API, –±–æ—Ç –¥–æ–ª–∂–µ–Ω:
1. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
2. –î–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### Java
- JDA (Java Discord API)
- OkHttp –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- JSON-P –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON

### Python
- discord.py
- requests –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### Node.js
- discord.js
- axios –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- dotenv –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è 